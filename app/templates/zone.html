{% extends "base.html" %}
{% block container %}
    <h2><a href="{{ url_for('zone_bp.list') }}">Zones</a> / {{ zone.name }} {{ vms|length }} virtual machine(s)</h2>
    <form
            method="POST"
            action="{{ url_for('zone_bp.view', number=zone.number) }}"
            role="form">
        {{ form.csrf_token }}
        {% if vms|length > 0 %}
            <button type="submit" class="btn btn-default" name="action" value="sub">Submit</button>
            <br/>
            <div>
                <input id="vm_name_filter" type="text" onkeyup="tbl_row_filter(this,
                'vm_list',
                'filterable',
                'counted',
                'count_filtered_vms',
                'count_selected_filtered_vms')"/>
            </div>
            <br/>
            <div>
                Total: <span class="badge">{{ vms|length }}</span>
                Filtered: <span id="count_filtered_vms" class="badge">0</span>
                Selected: <span id="count_selected_vms" class="badge">0</span>
                Selected Filtered: <span id="count_selected_filtered_vms" class="badge">0</span>
            </div>
            <br/>
            <table id="vm_list">
                <tr class="rom_row">
                    <th class="data-cell">
                        <input type="checkbox" id="vm_all" onclick="tbl_toggle_checkboxes(this, 'vm_list', 'counted')"/>
                        <label for="vm_all"></label>
                    </th>
                    <th class="data-cell">ID</th>
                    <th class="data-cell">Name</th>
                    <th class="data-cell">State</th>
                    <th class="data-cell">CPU</th>
                    <th class="data-cell">MEM</th>
                    <th class="data-cell">IP Address</th>
                </tr>
                {% for vm in vms %}
                    <tr id="row_vm_id_{{ vm.id }}">
                        <td>
                            <input type="checkbox" class="counted" id="chk_vm_id_{{ vm.id }}"
                                   onclick="counter_refresh(this, 'count_selected_vms')"/>
                        </td>
                        <td class="data-cell">{{ vm.id }}</td>
                        <td id="vm_id_{{ vm.id }}" class="data-cell filterable">{{ vm.name }}</td>
                        <td class="data-cell">{{ vm.state_desc() }}</td>
                        <td class="data-cell">{{ vm.cpu }}</td>
                        <td class="data-cell">{{ vm.memory_gb() }}</td>
                        <td class="data-cell">{{ vm.ip_address }}</td>
                    </tr>
                {% endfor %}
            </table>
        {% endif %}

    </form>
{% endblock %}